<template name="calendar_page">
  {{#if select_calendars}}
    {{> select_calendars_view}}
  {{else}}
    {{> calendar_view}}
  {{/if}}
</template>

<template name="select_calendars_view">
  <div class="fluid-row">
    <div class="span4 offset4">
      <div class="calendars">
        <h3>Select Calendars to Import</h3>
        <ul>
          {{#each calendars}}
            <label class="checkbox">
              <input type="checkbox" value="{{gCalId}}">{{summary}}</input>
            </label>
          {{/each}}
        </ul>
        <button id="importCals" class="btn btn-primary">Import</button>
      </div>
    </div>
  </div>
</template>

<template name="calendar_view">
  <div class="fluid-row">
    <div class="span8 offset2">
      <h1>Event Preferences</h1>
      <form id="calendarPreferences" class="form-horizontal">
        <div class="dayPreferences">
          <h3>Days of Week</h3>
          {{#each daysOfWeek}}
          <label class="checkbox inline">
            <input class="dayBox" type="checkbox" id="dayBox{{value}}" value="{{value}}">{{day}}</input>
          </label>
          {{/each}}
        </div>
        <div class="eventPreferences">
          <h3>Types of Events</h3>
          {{#each eventTypes}}
          <label class="checkbox inline">
            <input class="eventBox" type="checkbox" value="{{value}}">{{event}}</input>
          </label>
          {{/each}}
        </div>
      </form>
      <h3>Google Calendar buttons</h3>
      <button class="gCal getCalendars">Get Google Calendars</button>
      {{#if hasCalendars}}
      <button class="gCal getEvents">Sync Events</button>
      {{/if}}
      {{#if imported_events}}
      <p>Successfully imported/updated <strong>{{imported_events}}</strong> events!</p>
      {{/if}}
    </div>
  </div>
  <div class="fluid-row">
    <div class="span8 offset2">
      <h1>Calendar</h1>
      <div id="cal" class="Clear">
        <div id="calTop">
          <button id="lastMonth">Left</button>
          <div id="dateStr">{{date_string}}</div>
          <button id="nextMonth">Right</button>
        </div>
        <div id="numberArea">
          {{#each get_days}}
          <div class="day{{class}}">{{number}}</div>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
</template>

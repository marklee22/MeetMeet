<template name="calendar_page">
  {{#if selectCalendars}}
    {{> select_calendars}}
  {{else}}
    {{#if showUserPrefs}}
      {{> calendar_prefs}}
    {{/if}}
    {{> full_calendar}}
  {{/if}}
</template>

<template name="full_calendar">
  <div class="fluid-row">
    <div class="span10 offset1">
      {{#if hideCalPrefs}}
        <button class="btn" id="showCalPrefs">Show Preferences</button>
      {{/if}}
      {{#constant}}
      <div id="fullCalendar"></div>
      {{/constant}}
    </div>
  </div>
</template>

<template name="select_calendars">
  <div class="fluid-row">
    <div class="span4 offset4">
      <div class="calendars">
        <h3>Select Calendars to Import</h3>
        <ul>
          {{#each calendars}}
            <label class="checkbox">
              <input type="checkbox" value="{{gCalId}}" {{#if isSelected}}checked{{/if}}>{{summary}}</input>
            </label>
          {{/each}}
        </ul>
        <button id="importCals" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</template>

<template name="calendar_prefs">
  <div class="fluid-row">
    <div class="span10 offset1">
      <form id="calendarPreferences" class="form-horizontal">
        <h4>Event Preferences</h4>
        <div class="dayPreferences">
          <h3>Days to <strong>NOT</strong> Meet</h3>
          {{#each daysOfWeek}}
          <label class="checkbox inline">
            <input class="dayBox" type="checkbox" id="day-{{value}}" value="{{value}}" {{#if checked}}checked{{/if}}>{{day}}</input>
          </label>
          {{/each}}
        </div>
        <div class="eventPreferences">
          <h3>Types of Events</h3>
          {{#each eventTypes}}
          <label class="checkbox inline">
            <input class="eventBox" type="checkbox" id="event-{{value}}" value="{{value}}" {{#if checked}}checked{{/if}}>{{event}}</input>
          </label>
          {{/each}}
        </div>
      </form>
      <h4>Google Calendar buttons</h4>
      <button class="gCal getCalendars">Get Google Calendars</button>
      {{#if hasCalendars}}
      <button class="gCal getEvents">Sync Events</button>
      {{/if}}
      {{#if imported_events}}
      <p>Successfully imported/updated <strong>{{importedEvents}}</strong> events!</p>
      {{/if}}
    </div>
    <button class="btn" id="hideCalPrefs">Hide Preferences</button>
  </div>
</template>

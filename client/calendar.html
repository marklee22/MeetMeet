<template name="calendar_page">
  {{#if selectCalendars}}
    {{> select_calendars}}
  {{else}}
    {{#if showUserPrefs}}
      {{> calendar_prefs}}
    {{/if}}
    {{#if showDayView}}
      {{> day_calendar}}
    {{else}}
      {{> month_calendar}}
    {{/if}}
  {{/if}}
</template>

<template name="select_calendars">
  <div class="fluid-row">
    <div class="span4 offset4">
      <div class="calendars">
        <h3>Select Calendars to Import</h3>
        <ul>
          {{#each calendars}}
            <label class="checkbox">
              <input type="checkbox" value="{{gCalId}}">{{summary}}</input>
            </label>
          {{/each}}
        </ul>
        <button id="importCals" class="btn btn-primary">Import</button>
      </div>
    </div>
  </div>
</template>

<template name="calendar_prefs">
  <div class="fluid-row">
    <div class="span10 offset1">
      <form id="calendarPreferences" class="form-horizontal">
        <h4>Event Preferences</h4>
        <div class="dayPreferences">
          <h3>Days of Week</h3>
          {{#each daysOfWeek}}
          <label class="checkbox inline">
            <input class="dayBox" type="checkbox" id="day-{{value}}" value="{{value}}">{{day}}</input>
          </label>
          {{/each}}
        </div>
        <div class="eventPreferences">
          <h3>Types of Events</h3>
          {{#each eventTypes}}
          <label class="checkbox inline">
            <input class="eventBox" type="checkbox" id="event-{{value}}" value="{{value}}">{{event}}</input>
          </label>
          {{/each}}
        </div>
      </form>
      <h4>Google Calendar buttons</h4>
      <button class="gCal getCalendars">Get Google Calendars</button>
      {{#if hasCalendars}}
      <button class="gCal getEvents">Sync Events</button>
      {{/if}}
      {{#if imported_events}}
      <p>Successfully imported/updated <strong>{{importedEvents}}</strong> events!</p>
      {{/if}}
    </div>
    <button class="btn" id="hideCalPrefs">Hide Preferences</button>
  </div>
</template>

<template name="month_calendar">
  <div class="fluid-row">
    {{#if hideCalPrefs}}
    <button class="btn" id="showCalPrefs">Show Preferences</button>
    {{/if}}
    <div class="span10 offset1">
      <h1>Calendar</h1>
      <div id="cal" class="Clear">
        <div id="calTop">
          <button id="lastMonth">Left</button>
          <div id="dateStr">{{dateString}}</div>
          <button id="nextMonth">Right</button>
        </div>
        <div id="numberArea">
          {{#each getDays}}
          <div class="day{{class}}">{{number}}</div>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
</template>

<template name="day_calendar">
  <div class="fluid-row">
    <button class="btn left" id="showMonthView">Month View</button>
    <div class="span10 offset1">
      <div id="calDay">
        <h3>Selected Day: {{selectedDay}}</h3>
        <table>
        {{#each hours}}
          <tr>
            <td>{{hour}}</td>
            {{#if event}}
              <td>{{start}}-{{end}}: {{event}}</td>
            {{else}}
              <td></td>
            {{/if}}
          </tr>
        {{/each}}
      </div>
    </div>
  </div>
</template>
